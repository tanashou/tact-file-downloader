# Tact File Downloader

東海国立大学機構の学習支援システム TACT から講義資料などのファイルを一括でダウンロードするためのツールです。お気に入りに登録されている講義のみをダウンロードします。

## Requirements

-   [rye](https://rye-up.com)

## Installation

1. このリポジトリをクローンしてください。
    ```
    git clone https://github.com/tanashou/tact-file-downloader.git
    ```

## Setup

1. `rye`を[こちら](https://rye-up.com/guide/installation/)のインストール方法に従ってインストールしてください。

1. プロジェクトのディレクトリに移動した後に次のコマンドを実行してください。各種依存パッケージなどがインストールされます。

    ```
    rye sync
    ```

1. TACT のログインに必要なユーザー名やパスワードを環境変数として登録してください。それぞれの環境変数名は次のようにしてください。

    | 変数名        | 値                |
    | ------------- | ----------------- |
    | TACT_USERNAME | TACT のユーザー名 |
    | TACT_PASSWORD | TACT のパスワード |

    **(任意)** ワンタイムパスワードの自動生成を行いたい場合は、以下の環境変数を設定してください。

    | 変数名       | 値                                                                                           |
    | ------------ | -------------------------------------------------------------------------------------------- |
    | TACT_OTP_URI | TACT のワンタイムパスワード生成 URI |

    URI を設定しなかった場合はプログラム実行時にワンタイムパスワードの入力が求められます。

## Usage

1. プロジェクトのディレクトリに移動した後に次のコマンドを実行してください。

    ```
    rye run main
    ```

1. ワンタイムパスワードの生成 URI を設定していない場合は、ログイン時にワンタイムパスワードを求められるので入力してください。

1. 初回実行時にはファイルのダウンロード先を聞かれるので、ダウンロード先を指定してください。初回以降はダウンロード先が`config.ini`に保存されるので再度聞かれることはありません。ダウンロード先を変更したい場合は`config.ini`を削除して、実行時に再度ダウンロード先を指定してください。

1. ファイルがダウンロードが開始されます。すでにダウンロード済みのファイルはスキップされます。

## TODO

-   [x] ワンタイムパスワードの自動取得。
-   [x] ファイルをダウンロードしたい講義の選択。お気に入りの講義のみを取得するなどしたい。
